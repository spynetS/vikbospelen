{% extends "base.html" %}

{% block content %}

	<section id="hero" class="bg-[url('/static/background.jpg')] bg-cover h-screen w-screen text-center" >
		<div class="bg-[#00000085] absolute top-0 h-screen w-screen flex flex-col items-center justify-center" >
			<h1 class="text-7xl text-white italic">Välkommen till <br/> vikbolandsspelen</h1>
			<p class="text-xl text-gray-400 mt-4" >Lokal kultur sedan 1983</p>

			<div class="flex flex-row gap-4 mt-12" >
				<a class="rounded-lg p-3 text-white bg-[#a09341] text-center" href="/forestallningar">Senaste föreställningarna</a>
				<a class="rounded-lg p-3 text-black bg-white text-center" href="#news">Nyheter</a>
			</div>
		</div>
	</section>

	<script type="text/javascript">
     window.addEventListener('DOMContentLoaded', () => {
         const loadTl = gsap.timeline();

         loadTl
             .from("#hero h1", {
                 y: 50,
                 opacity: 0,
                 duration: 1,
                 ease: "power2.out"
             })
             .from("#hero p", {
                 y: 30,
                 opacity: 0,
                 duration: 0.8,
                 ease: "power2.out"
             }, "-=0.5") // start slightly earlier
             .from("#hero a", {
                 y: 40,
                 opacity: 0,
                 duration: 0.6,
                 stagger: 0.2,
                 ease: "power2.out"
             }, "-=0.4");
     });
    </script>


	<section id="first" class="pt-12 container mx-auto h-screen flex flex-row gap-12 justify-around pb-4" >
		<div class="flex flex-col items-center pt-32 h-full justify-around" >
			<div class="flex flex-col gap-4" >
				<h2 class="title text-6xl  " >{{latest.title}}</h2>
				<p class="description">{{latest.short_description}}</p>
				<p class="description">{{latest.description}}</p>
			</div>
			<a href="{% url 'event_detail' latest.slug %}" class="button rounded-lg w-full p-3 text-white bg-[#a09341] text-center" >Anmäll här</a>

		</div>
		<img class="h-full" src= "{{ latest.poster.url }}" alt="{{ latest.title }}" />

	</section>

	<script type="text/javascript">
	 const t2 = gsap.timeline({
		 scrollTrigger: {
			 trigger: "#first",
			 start: "top top",
			 end: "+=200%",
			 scrub: true,
			 pin: true,
		 }
	 });


	 t2.from(".title", {
		 y: 30,
		 opacity: 0,
		 duration: 0.6,
		 ease: "power2.out"
	 })
	   .from(".description", {
		   y: 20,
		   opacity: 0,
		   duration: 0.6,
		   ease: "power2.out"
	   }, "-=0.3")
	   .from(".button", {
		   y: 10,
		   opacity: 0,
		   duration: 0.5,
		   ease: "power2.out"
	   }, "-=0.3")
	   .from("#first img", {
		   x: 50,
		   opacity: 0,
		   scale: 0.95,
		   duration: 0.8,
		   ease: "power3.out"
	   }, "-=0.2");
	</script>

	<section id="newest" class="h-screen w-screen bg-[#1a2545] pt-32 px-12" >
		<h2 class="text-[#a09341] text-4xl text-center" >Senaste föreställningarna</h2>
		<div class="grid grid-cols-3 gap-12" >
			{% for event in last_3 %}
				<div class="event border-[#a09341] border-2 px-12 py-2 flex flex-col items-center gap-2" >
					<img src="{{event.poster.url}}" alt="{{event.title}}" />
					<p class="text-[#a09341] text-xl" >{{event.title}}</p>
					<a href="{% url 'event_detail' event.slug %}" class=" rounded-lg w-full p-2 text-white bg-[#a09341] text-center" >Se mer</a>
				</div>
			{% endfor %}
		</div>
	</section>

	<script>
	 gsap.registerPlugin(ScrollTrigger);

	 const tl = gsap.timeline({
		 scrollTrigger: {
			 trigger: "#newest",
			 start: "top top",
			 end: "+=200%",
			 pin: true,
			 scrub: true,
		 }
	 });

	 // Animate the title first
	 tl.from("#newest h2", {
		 opacity: 0,
		 y: 40,
		 duration: 1,
		 ease: "power2.out"
	 });

	 // Then animate each event card staggered
	 tl.from("#newest .event", {
		 opacity: 0,
		 y: 60,
		 stagger: 0.2,
		 duration: 1,
		 ease: "power2.out"
	 }, "-=0.5"); // overlap start a bit with the title animation
	</script>


	<section id="news" class="bg-[#9d0024] h-screen w-screen" >
		<div class="fb-page" data-href="https://www.facebook.com/vikbolandsspelen" data-tabs="timeline" data-width="" data-height="" data-small-header="true" data-adapt-container-width="true" data-hide-cover="true" data-show-facepile="true"><blockquote cite="https://www.facebook.com/vikbolandsspelen" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/vikbolandsspelen">Vikbolandsspelet</a></blockquote></div>

	</section>
{% endblock %}
